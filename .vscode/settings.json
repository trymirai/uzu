{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.organizeImports": "explicit",
  },
  "rust-analyzer.rustfmt.extraArgs": ["+nightly"],
  "rust-analyzer.check.workspace": false,
  "rust-analyzer.cargo.allTargets": false,
  "rust-analyzer.check.noDefaultFeatures": true,
  "rust-analyzer.testExplorer": true,
  "[rust]": {
    "editor.defaultFormatter": "rust-lang.rust-analyzer",
  },
  "[swift]": {
    "editor.formatOnSave": true,
  },
  "[toml]": {
    "editor.defaultFormatter": "tamasfe.even-better-toml",
  },
  // Treat Metal headers/sources as C++ for clang-format
  "files.associations": {
    "*.metal": "cpp",
    "*.h": "cpp",
    "*.hpp": "cpp",
  },
  // Use repository .clang-format
  "clang-format.style": "file",
  "C_Cpp.formatting": "clangFormat",
  "C_Cpp.clang_format_style": "file",
  // Default to MS C/C++ extension formatter for C/C++ (clang-format backend)
  "[cpp]": {
    "editor.defaultFormatter": "ms-vscode.cpptools",
    "editor.formatOnSave": true,
  },
  "[c]": {
    "editor.defaultFormatter": "ms-vscode.cpptools",
    "editor.formatOnSave": true,
  },
}
